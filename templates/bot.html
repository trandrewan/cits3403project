<!DOCTYPE html>
<html>
<head>
	<title>CricketBot</title>
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='cricdoststyle.css') }}">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@300&display=swap" rel="stylesheet">
	<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>
	<div class="head-bannar">
	<h2><i class='bx bx-cricket-ball'></i> CricketGPT</h2>
	<nav class="navbar"></nav>
	</div>
	<div class="card">
        <div class="card-body">
            <div class="card-header">
                <h5 class="card-title">CricketGPT</h5>
                <p class="card-text">A cricket chat bot</p>
            </div>
            <div class="chat-window" id="chat">
            </div>
            <input type="text" id="input-field" placeholder="Type your message..." />
            <button onclick="sendMessage()">Send</button>
            <script>
                async function sendMessage() {
                    const input = document.getElementById('input-field');
                    const chat = document.getElementById('chat');

                    // Create user message element
                    const userMessage = document.createElement('div');
                    userMessage.className = 'user-message';
                    userMessage.innerText = input.value;
                    chat.appendChild(userMessage);

                    // Send POST request to Flask API
                    const response = await fetch('/api', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ message: input.value })
                    });

                    const data = await response.text();

                    // Create API response message element
                    const apiMessage = document.createElement('div');
                    apiMessage.className = 'response-message';
                    apiMessage.innerText = data;
                    chat.appendChild(apiMessage);

                    // Scroll to the bottom of the chat box
                    chat.scrollTop = chat.scrollHeight;

                    // Clear the input field
                    input.value = '';
                }
            </script>
            <span id="typing-indicator" class="typing-indicator" style="display: none;"> Bot is typing...
            </span>
        </div>
    </div>
</body>
</html>
